namespace = KoH_religiousflavour


KoH_religiousflavour.1 = { #A Pope and His Estates
	title = KoH_religiousflavour.1.t
	desc = KoH_religiousflavour.1.desc
	theme = unfriendly
	left_portrait = {
		character = this
	}

	trigger = {		
		exists = title:k_papal_state.holder 
		title:k_papal_state.holder.faith = root.faith
		title:k_papal_state.holder.dynasty = root.dynasty  
		#title:k_papal_state.holder { NOT = { OR = { has_trait = greedy has_trait = zealous } } }

		OR = {
			any_sibling = {
				limit = {
				is_male = yes
				is_ruler = no
				place_in_line_of_succession = {
					target = root.primary_title
					value > 2
					}
				}
			}
			any_child = {
				limit = {
				is_male = yes
				is_ruler = no
				place_in_line_of_succession = {
					target = root.primary_title
					value > 2
					}
				}
			}
		}
	}

	immediate = {
		title:k_papal_state.holder = { save_scope_as = scoped_pope }

		every_sibling = {
			limit = {
			 	is_male = yes
			 	is_ruler = no
			 	place_in_line_of_succession = {
			  		target = root.primary_title
			  		value > 2
			 		}
				}
			add_to_list = custom_list_name
		}

		every_sibling = {
			limit = {
			 	is_male = yes
			 	is_ruler = no
			 	place_in_line_of_succession = {
			  		target = root.primary_title
			  		value > 2
			 		}
				}
			add_to_list = custom_list_name
		}

	    random_in_list = {
		   name = custom_list_name
		   save_as_scope = player_one
	    }

	    random_in_list = {
		   name = custom_list_name
		   limit = {
			   NOT = { 
				   THIS = scope:player_one 
			   }
		   }
		   save_as_scope = player_two
	    }
	}

	option = { 
		name = KoH_religiousflavour.1.a

		
			scope:player_one = {
				add_opinion = {
					target = title:k_papal_state.holder 
					opinion = 100
					modifier = grateful_opinion
				} 
				add_opinion = {
					target = ROOT
					opinion = 100
					modifier = grateful_opinion
				} 
				set_employer = title:k_papal_state.holder 
			}
			scope:player_two = { 
				add_opinion = {
					target = title:k_papal_state.holder 
					opinion = 100
					modifier = grateful_opinion
				} 

				add_reverse_opinion = {
					target = ROOT
					opinion = 100
					modifier = grateful_opinion
				} 
				set_employer = title:k_papal_state.holder 
			}
			title:k_papal_state.holder = {
				add_opinion = {
					target = scope:player_one
					opinion = 20
					modifier = grateful_opinion
				} 

				add_opinion = {
					target = scope:player_two
					opinion = 20
					modifier = grateful_opinion
				} 

				add_opinion = {
					target = ROOT
					opinion = 15
					modifier = grateful_opinion
				}
			}
		
		ai_chance = {
			base = 100
		}
	}

	# option = {
	# 	name = KoH_religiousflavour.1.b

	# 	add_piety = 50

	# 	title:k_papal_state.holder = {
	# 		add_opinion = {
	# 			target = ROOT
	# 			opinion = -15
	# 			modifier = disappointed_opinion
	# 		}
	# 	}
	# }

	# option = {
	# 	name = KoH_religiousflavour.1.c
	# 	trigger = {
	# 		OR = {
	# 			has_trait = zealous
	# 			learning <= 10
	# 		}
	# 	add_piety = 50

	# 	title:k_papal_state.holder = {
	# 		add_opinion = {
	# 			target = ROOT
	# 			opinion = -15
	# 			modifier = disappointed_opinion
	# 		}
	# 		add_piety = -100
	# 	}
	# 	add_piety = 200
	# 	add_learning_skill = 1
	# 	}
	# }
}

KoH_religiousflavour.202 = { #Monks Make Good Beer
	title = KoH_religiousflavour.202.t
	desc = KoH_religiousflavour.202.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.202.a

		hidden_effect = {
			create_character = {
				name = "Arthur"
				age = 20
				dynasty = 217
				gender = male
				mother = character:212854
				father = character:212950
				faith = "catholic"
				culture = root.culture
				trait = beauty_good_2
			}

		ai_chance = {
			base = 100
		}
	}
}

KoH_religiousflavour.2 = { #Monks Make Good Beer
	title = KoH_religiousflavour.2.t
	desc = KoH_religiousflavour.2.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.2.a

		random = {
			chance = 50
			add_learning_skill = 1
		}
		if = {
			limit = { NOT = { has_trait = drunkard } }
			random = {
				chance = 20
				add_trait = drunkard
				send_interface_toast = {
					type = event_toast_effect_bad
					title = "You have become a Drunkard"
					left_icon = root
				}
			}
		}

		ai_chance = {
			base = 50
		}
	}

	option = { 
		name = KoH_religiousflavour.2.b

		if = {
			limit = { NOT = { has_trait = temperate } }
			random = {
				chance = 20
				add_trait = temperate
				send_interface_toast = {
					type = event_toast_effect_good
					title = "You have become Temperate"
					left_icon = root
				}
			}
		}

		ai_chance = {
			base = 50
		}
	}
}

KoH_religiousflavour.3 = { #Monks Make Good Wine
	title = KoH_religiousflavour.3.t
	desc = KoH_religiousflavour.3.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.3.a

		random = {
			chance = 50
			add_learning_skill = 1
		}
		if = {
			limit = { NOT = { has_trait = drunkard } }
			random = {
				chance = 20
				add_trait = drunkard
				send_interface_toast = {
					type = event_toast_effect_bad
					title = "You have become a Drunkard"
					left_icon = root
				}
			}
		}

		ai_chance = {
			base = 50
		}
	}

	option = { 
		name = KoH_religiousflavour.3.b

		if = {
			limit = { NOT = { has_trait = temperate } }
			random = {
				chance = 20
				add_trait = temperate
				send_interface_toast = {
					type = event_toast_effect_good
					title = "You have become Temperate"
					left_icon = root
				}
			}
		}

		ai_chance = {
			base = 50
		}
	}
}
KoH_religiousflavour.4 = { #Monks have healing herbs
	title = KoH_religiousflavour.4.t
	desc = KoH_religiousflavour.4.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		piety_level >= 1
		OR = {
			has_trait = ill
		}
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.4.a

		random = {
			chance = 30
			remove_trait = ill
		}

		ai_chance = {
			base = 80
		}
	}

	option = { 
		name = KoH_religiousflavour.4.b

		if = {
			limit = { NOT = { has_trait = paranoid } }
			add_trait = paranoid
		}
	}
}

KoH_religiousflavour.5 = { #Monks is fantastic painter
	title = KoH_religiousflavour.5.t
	desc = KoH_religiousflavour.5.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		NOT = { has_trait = blind }
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.5.a

		remove_short_term_gold = -10
		add_prestige = 30
	}

	option = { 
		name = KoH_religiousflavour.5.b

	}
}

# KoH_religiousflavour.6 = { #Monks is fantastic painter
# 	title = KoH_religiousflavour.6.t
# 	desc = KoH_religiousflavour.6.desc
# 	theme = learning_scholarship_focus
# 	left_portrait = {
# 		character = this
# 	}

# 	trigger = {		
# 		is_commanding_army = no
# 		is_adult = yes
# 		is_imprisoned = no
# 		has_religion = religion:christianity_religion
# 		NOT = { has_trait = blind }
# 		# OR = {
# 		# 	location = {
# 		# 		region = world_europe_west
# 		# 	}
# 		# 	location = {
# 		# 		region = world_europe_south
# 		# 	}
# 		# }
# 	}

# 	option = { 
# 		name = KoH_religiousflavour.6.a

# 		remove_short_term_gold = -10
# 		add_prestige = 30
# 	}

# 	option = { 
# 		name = KoH_religiousflavour.6.b

# 	}
# }

KoH_religiousflavour.7 = { #Monks is fantastic painter
	title = KoH_religiousflavour.7.t
	desc = KoH_religiousflavour.7.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.7.a

		remove_short_term_gold = -30
		add_prestige = 30
		random = {
			chance = 20
			add_learning_skill = 1
		}
	}
	option = { 
		name = KoH_religiousflavour.7.b

	}
}

KoH_religiousflavour.8 = { #Monks is fantastic painter
	title = KoH_religiousflavour.8.t
	desc = KoH_religiousflavour.8.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		# OR = {
		# 	location = {
		# 		region = world_europe_west
		# 	}
		# 	location = {
		# 		region = world_europe_south
		# 	}
		# }
	}

	option = { 
		name = KoH_religiousflavour.8.a

		add_piety = 20

		random = {
			chance = 30
			add_learning_skill = 1
		}
	}
	option = { 
		name = KoH_religiousflavour.8.b
		if = {
			limit = { NOT = { has_trait = cynical } }
			add_trait = cynical
		}
	}
}

KoH_religiousflavour.9 = { #Child wants to be monk/nun - select child
	title = KoH_religiousflavour.9.t
	desc = KoH_religiousflavour.9.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}
	hidden = yes

	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
		any_child = {
			is_ruler = no
			age = 13
			NOT = { age = 16 }
			NOT = { has_trait = cynical }
			NOT = { is_clergy = yes }
		}
	}

	immediate = {
		random_child = {
			limit = {
				is_ruler = no
				age = 13
				NOT = { age = 16 }
				NOT = { has_trait = cynical }
				NOT = { is_clergy = yes }
			}
			trigger_event = KoH_religiousflavour.10
		}
	}
}

KoH_religiousflavour.10 = { #MChild Event
	#title = KoH_religiousflavour.10.t
	#desc = KoH_religiousflavour.10.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}
	hidden = yes

	immediate = {
		FROM = {
			trigger_event = KoH_religiousflavour.11  }
	}
}

KoH_religiousflavour.11 = { #Child wants to be monk/nun - parent response
	title = KoH_religiousflavour.11.t
	desc = KoH_religiousflavour.11.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}
	right_portrait = {
		character = FROM
	}

	option = { 
		name = KoH_religiousflavour.11.a

		FROM = {
			add_trait = devoted
			add_opinion = {
				target = ROOT
				opinion = 50
				modifier = grateful_opinion
			}
		}
		custom_tooltip = { text = KoH_religiousflavour.11.a.tt}
	}

	option = { 
		name = KoH_religiousflavour.11.b
		FROM = {
			add_stress = major_stress_loss
			add_opinion = {
				target = ROOT
				opinion = 50
				modifier = angry_opinion
			}
		}
	}
}

KoH_religiousflavour.12 = { #Donate to local monastery
	title = KoH_religiousflavour.12.t
	desc = KoH_religiousflavour.12.desc
	theme = learning_scholarship_focus
	left_portrait = {
		character = this
	}
	
	trigger = {		
		is_commanding_army = no
		is_adult = yes
		is_imprisoned = no
		has_religion = religion:christianity_religion
	}

	option = { 
		name = KoH_religiousflavour.12.a
		remove_short_term_gold = -30
		add_piety = 30
	}
	
	option = { 
		name = KoH_religiousflavour.12.b
		add_piety = -30
	}
}
